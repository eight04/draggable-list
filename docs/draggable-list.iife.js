var DraggableList=function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function e(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return l=t.done,t},e:function(t){i=!0,s=t},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw s}}}}return function(t){var r,n=e(t.children);try{for(n.s();!(r=n.n()).done;){r.value.draggable=!0}}catch(t){n.e(t)}finally{n.f()}new MutationObserver((t=>{var r,n=e(t);try{for(n.s();!(r=n.n()).done;){var a,o=e(r.value.addedNodes);try{for(o.s();!(a=o.n()).done;){a.value.draggable=!0}}catch(t){o.e(t)}finally{o.f()}}}catch(t){n.e(t)}finally{n.f()}})).observe(t,{childList:!0});let a=null,o=0,s=0,l=null,i=[],d=null,c=!1;t.addEventListener("dragstart",(e=>{if(e.target.parentNode!==t)return;d=e.target,c=!1,a={x:e.pageX,y:e.pageY},o=[...t.children].indexOf(e.target),s=o,l=a;const r=window.scrollY;i=[...t.children].map((t=>{const e=t.getBoundingClientRect();return{top:e.top+r,bottom:e.bottom+r}})),d.classList.add("draggable-list-target"),t.classList.add("draggable-list-dragging"),t.dispatchEvent(new CustomEvent("d:dragstart",{detail:{origin:e,dragTarget:d}}))})),t.addEventListener("dragover",(t=>{d&&t.preventDefault()})),document.addEventListener("dragover",(e=>{if(!d)return;const r={x:e.pageX,y:e.pageY};s=function(t,e,r,n,a,o){if(o>n)for(let n=a;n<t.length&&!(e[n].top>o);n++)n<r&&e[n].bottom<o&&t[n].classList.contains("draggable-list-transformed")?(t[n].classList.remove("draggable-list-transformed"),t[n].style=""):n>r&&e[n].top<o&&!t[n].classList.contains("draggable-list-transformed")&&(t[n].classList.add("draggable-list-transformed"),t[n].style.transform="translateY(".concat(e[r].top-e[r+1].top,"px)")),a=n;else for(let n=a;n>=0&&!(e[n].bottom<o);n--)n>r&&e[n].top>o&&t[n].classList.contains("draggable-list-transformed")?(t[n].classList.remove("draggable-list-transformed"),t[n].style=""):n<r&&e[n].bottom>o&&!t[n].classList.contains("draggable-list-transformed")&&(t[n].classList.add("draggable-list-transformed"),t[n].style.transform="translateY(".concat(e[r].bottom-e[r-1].bottom,"px)")),a=n;return a}(t.children,i,o,l.y,s,r.y),l=r,t.dispatchEvent(new CustomEvent("d:dragmove",{detail:{origin:e,startPos:a,currentPos:r,dragTarget:d}}))})),document.addEventListener("dragend",(r=>{if(d){var n,a=e(t.children);try{for(a.s();!(n=a.n()).done;){const t=n.value;t.classList.remove("draggable-list-transformed"),t.style=""}}catch(t){a.e(t)}finally{a.f()}d.classList.remove("draggable-list-target"),t.classList.remove("draggable-list-dragging"),t.dispatchEvent(new CustomEvent("d:dragend",{detail:{origin:r,originalIndex:o,spliceIndex:s,insertBefore:s<o?t.children[s]:t.children[s+1],dragTarget:d,dropped:c}})),d=null}})),t.addEventListener("drop",(()=>{c=!0}))}}();
//# sourceMappingURL=draggable-list.iife.js.map
