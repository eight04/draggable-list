var DraggableList=function(){"use strict";return function(e){for(const t of e.children)t.draggable=!0;new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)e.draggable=!0})).observe(e,{childList:!0});let t,r,a=null,n=0,s=0,d=null,l=null,i=!1,o=[];const g=new Map;function c(t,r,a,n){for(let s=r;s<=a;s++)t&&!e.children[s].classList.contains("draggable-list-transformed")?(e.children[s].classList.add("draggable-list-transformed"),e.children[s].style.transform=n):!t&&e.children[s].classList.contains("draggable-list-transformed")&&(e.children[s].classList.remove("draggable-list-transformed"),e.children[s].style="")}function f(t,r,n){const s={origin:t,startPos:a,currentPos:d,dragTarget:l};n&&Object.assign(s,n),e.dispatchEvent(new CustomEvent(r,{detail:s}))}e.addEventListener("dragstart",(c=>{var v,u;c.target.parentNode===e&&(l=c.target,i=!1,d=a={x:c.pageX,y:c.pageY},g.clear(),[...e.children].map(((e,t)=>{g.set(e,t)})),o=[...e.children].map((e=>e.getBoundingClientRect())),r="translateY(".concat(o[n].top-(null===(v=o[n+1])||void 0===v?void 0:v.top),"px)"),t="translateY(".concat(o[n].bottom-(null===(u=o[n-1])||void 0===u?void 0:u.bottom),"px)"),s=n=g.get(c.target),l.classList.add("draggable-list-target"),e.classList.add("draggable-list-dragging"),f(c,"d:dragstart"))})),e.addEventListener("dragenter",(a=>{if(!l)return;if(a.target.parentNode!==e)return;const d=g.get(a.target);d===s&&d!==n?c(!e.children[d].classList.contains("draggable-list-transformed"),d,d,d>n?r:t):d>n?s<d?(c(!1,s,n-1),c(!0,Math.max(n+1,s+1),d,r)):c(!1,d+1,s):s<d?c(!1,s,d-1):(c(!0,d,Math.min(n-1,s-1),t),c(!1,n+1,s)),s=d,a.preventDefault(),f(a,"d:dragmove")})),e.addEventListener("dragover",(e=>{if(!l)return;e.preventDefault();const t={x:e.pageX,y:e.pageY};d=t,f(e,"d:dragmove")})),document.addEventListener("dragend",(t=>{if(l){for(const t of e.children)t.classList.remove("draggable-list-transformed"),t.style="";l.classList.remove("draggable-list-target"),e.classList.remove("draggable-list-dragging"),f(t,"d:dragend",{originalIndex:n,spliceIndex:s,insertBefore:s<n?e.children[s]:e.children[s+1],dropped:i}),l=null}})),e.addEventListener("drop",(e=>{l&&(i=!0,e.preventDefault())}))}}();
//# sourceMappingURL=draggable-list.iife.js.map
